#### 目录

* 引用
* `const`引用
* 引用传递
* 引用作为函数返回值
* 引用与指针区别

##### 引用

* 变量别名

  * 变量有名称与空间
  * 引用不是变量，仅仅是别名；没有自己独立的空间，与**所引用的变量共享空间**
    * 对引用所做的改变就是对其引用的变量的改变
  * 引用在定义时初始化；初始化后不能重新指向其他变量

* 一般形式

  * 类型 &引用名 = 变量名

  * ```
    int a = 1;
    int &b = a;   // b是a的别名，因此a和b是同一个单元
    // 定义引用时一定要初始化，指明该引用变量是谁的别名
    
    int c = 100;
    b = c;        // 不代表将b引用到c变量，而只是将c变量的值赋值给b引用
    ```

  * 实际应用中，引用常作为参数传递与返回值

##### `const`引用

* 指向`const`对象的引用

* ```c++
  const int val = 1024;
  const int& refval = val;  // ok:both reference and object are const
  int& ref2 = val;          // error:nonconst reference to a const object
  
  refval = 200;            // 常量不允许赋值
  
  int val2 = 1024;
  const int& ref3 = val2;  // const reference to nonconst object
  ref3 = 2;                // 不允许更改
  
  double val3 = 3.14;
  const int& ref4 = val3;  // int temp = val3; 产生临时变量
                           // const int& ref4 = temp;
  
  int& ref5 = val3;        // 普通引用则不会进行临时变量的创建 
  ```

##### 按引用传递

* 在形参前加上引用运算符`&`
  * `swap(int &a,int &b);`
* 按值传递方式较好理解，但形参值的改变不能**对实参产生影响**
* 地址传递方式通过形参的改变使相应的实参数改变，但程序容易出现错误而且难以阅读
* 引用作为参数对形参的任何操作都能**改变相应的实参的数据**，又使函数调用更加自然、方便
* ![image-20211222205824932](c%E5%88%B0c++3.assets/image-20211222205824932.png)

##### 引用作为返回值

* 主要目的：将函数放在赋值运算符的左边

* 注意：**不能**返回**局部变量的引用**

  * ```c++
    // 引用作为函数返回值
    int a[] = {0,1,2,3,4};
    int& index(int i)
    {
        return a[i];
    }
    int main()
    {
        index(3) = 100;       // 引用作为函数返回值，可以将函数放在赋值运算符左边
                              // 函数返回引用，引用在函数返回时初始化
                              // index(3)在函数返回时被初始化为a[3]
        cout<<a[3]<<endl;
        return 0;
    }
    ```

  * ```c++
    int& add(int a,int b)
    {
        int sum;
        sum = a+b;
        return sum;
    }
    
    int main()
    {
        int n = add(3,4);
        int& n2 = add(4,45);            // n2是引用，没有自己独立空间
                                        // n2的值依赖于它所引用的变量
                                        // 若n2所引用的变量的生命周期结束后，n2是一个无效引用，那么n2值不确定
        cout<<"n="<<n<<endl;
        cout<<"n2="<<n2<<endl;
        return 0;
    }
    ```

##### 引用与指针的区别

* 引用直接访问变量，指针间接访问
* 引用是变量别名，不分配自己的内存空间，指针有自己的内存空间`（4B）`本身是一个变量（保存所指向变量的地址）
* 引用一经初始化不能再引用其他变量，而指针可以
* 尽可能使用引用

