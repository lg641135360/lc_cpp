#### 目录

* 构造函数
* 默认构造
* 重载构造
* 构造函数与`new`
* 全局对象的构造先于构造函数
* 析构函数
* 析构函数与数组
* 析构函数与`delete`运算符
* 析构函数显式调用

##### 构造函数

* 特殊的成员函数；创建类类型的新对象，自动调用构造；保证对象每个数据成员正确被初始化
* 定义规则
  * 函数名与类名相同
  * 不能定义构造函数的类型（返回类型），不能使用`void`
  * **`public`限定**
  * 声明为私有有特殊的用途
    * 单例
  * 可以有任意类型和任意个数的参数，一个类可有多个构造函数（重载）

##### 默认构造函数

* 不带参数的构造
* 程序没声明，则系统自动产生一个默认构造
  * 函数体为空 ==> 没有给数据成员赋值（导致其为0）
* 自实现一个构造函数，系统就不会自动生成无参构造

##### `delete`运算符

* `new`运算符 分配内存 + 调用构造
* `delete`运算符 释放内存+调用析构
  * 不能被重载，不带参数
* `new`在堆上创建对象，由程序员自己销毁
* `Test t1;`在栈上创建的，析构顺序与构造顺序相反
  * 也是块作用域

##### 全局对象构造先于`main`函数

* ![image-20211227235109293](%E6%9E%84%E9%80%A0%E4%B8%8E%E6%9E%90%E6%9E%841.assets/image-20211227235109293.png)

##### 析构函数

* 取反构造函数`~`
* 无返回类型
* 无参数
* **不能被重载**
* 没定义时，编译器自动生成一个**默认析构**
  * **默认为空**

##### 析构与数组

* ```c++
  int main()
  {
  	Test t[2] = {10,20};  // 调用两次Test(int i);
      return 0;
  }  // 逆序析构
  ```

* ![image-20211227235725705](%E6%9E%84%E9%80%A0%E4%B8%8E%E6%9E%90%E6%9E%841.assets/image-20211227235725705.png)

##### 显式调用析构

* 对象生命周期结束时，自动调用析构
* 导致调用两次`t.~Test();`
* 很少用
  * `stl`